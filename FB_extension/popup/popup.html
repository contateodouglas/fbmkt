<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook Marketplace Auto Poster</title>
    <link rel="stylesheet" href="../styles/common.css">
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="popup-container">
        <!-- Header -->
        <div class="popup-header">
            <div class="header-content">
                <div class="logo">
                    <img src="../assets/icons/icon48.png" alt="Logo" class="logo-img">
                    <h1 class="app-title">FB Marketplace Auto Poster</h1>
                </div>
                <div class="header-actions">
                    <button class="btn btn-sm btn-outline" id="settingsBtn" title="Configura√ß√µes">
                        ‚öôÔ∏è
                    </button>
                    <button class="btn btn-sm btn-outline" id="helpBtn" title="Ajuda">
                        ‚ùì
                    </button>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="dashboard">
                üìä Dashboard
            </button>
            <button class="nav-tab" data-tab="create">
                ‚ûï Criar An√∫ncio
            </button>
            <button class="nav-tab" data-tab="schedule">
                ‚è∞ Agendamentos
            </button>
        </div>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Dashboard Tab -->
            <div class="tab-pane active" id="dashboard">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalAds">0</div>
                        <div class="stat-label">Total de An√∫ncios</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="scheduledAds">0</div>
                        <div class="stat-label">Agendados</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="publishedAds">0</div>
                        <div class="stat-label">Publicados</div>
                    </div>
                </div>

                <div class="recent-activity">
                    <h3>Atividade Recente</h3>
                    <div class="activity-list" id="activityList">
                        <div class="activity-item">
                            <div class="activity-icon">üìù</div>
                            <div class="activity-content">
                                <div class="activity-title">Bem-vindo ao Auto Poster!</div>
                                <div class="activity-time">Comece criando seu primeiro an√∫ncio</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <button class="btn btn-primary w-100" id="quickCreateBtn">
                        ‚ûï Criar Novo An√∫ncio
                    </button>
                    <button class="btn btn-secondary w-100 mt-2" id="bulkImportBtn">
                        üìÅ Importar em Massa
                    </button>
                </div>
            </div>

            <!-- Create Ad Tab -->
            <div class="tab-pane" id="create">
                <form id="adForm" class="ad-form">
                    <div class="form-section">
                        <h3>Informa√ß√µes B√°sicas</h3>
                        
                        <div class="form-group">
                            <label class="form-label" for="adTitle">T√≠tulo do An√∫ncio *</label>
                            <input type="text" class="form-control" id="adTitle" required maxlength="100">
                            <small class="form-text">M√°ximo 100 caracteres</small>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="adDescription">Descri√ß√£o *</label>
                            <textarea class="form-control" id="adDescription" required maxlength="1000" rows="4"></textarea>
                            <small class="form-text">M√°ximo 1000 caracteres</small>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="adPrice">Pre√ßo (R$) *</label>
                                <input type="number" class="form-control" id="adPrice" required min="0" step="0.01">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="adCondition">Condi√ß√£o *</label>
                                <select class="form-control" id="adCondition" required>
                                    <option value="">Selecione...</option>
                                    <option value="new">Novo</option>
                                    <option value="used_like_new">Usado - Como novo</option>
                                    <option value="used_good">Usado - Bom estado</option>
                                    <option value="used_fair">Usado - Estado regular</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Categoria e Detalhes</h3>
                        
                        <div class="form-group">
                            <label class="form-label" for="adCategory">Categoria *</label>
                            <select class="form-control" id="adCategory" required>
                                <option value="">Selecione uma categoria...</option>
                                <option value="vehicles">Ve√≠culos</option>
                                <option value="property_rentals">Im√≥veis para Alugar</option>
                                <option value="apparel">Roupas e Acess√≥rios</option>
                                <option value="electronics">Eletr√¥nicos</option>
                                <option value="entertainment">Entretenimento</option>
                                <option value="family">Fam√≠lia</option>
                                <option value="free_stuff">Itens Gratuitos</option>
                                <option value="garden_outdoor">Jardim e √Årea Externa</option>
                                <option value="hobbies">Hobbies</option>
                                <option value="home_improvement">Casa e Jardim</option>
                                <option value="home_sales">Im√≥veis √† Venda</option>
                                <option value="musical_instruments">Instrumentos Musicais</option>
                                <option value="office_supplies">Material de Escrit√≥rio</option>
                                <option value="pet_supplies">Pet Shop</option>
                                <option value="sporting_goods">Artigos Esportivos</option>
                                <option value="toys_games">Brinquedos e Jogos</option>
                                <option value="buy_sell_groups">Grupos de Compra e Venda</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="adBrand">Marca</label>
                            <input type="text" class="form-control" id="adBrand" maxlength="50">
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="adTags">Tags/Palavras-chave</label>
                            <input type="text" class="form-control" id="adTags" placeholder="Separe as tags com v√≠rgulas">
                            <small class="form-text">Ex: smartphone, android, samsung</small>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Localiza√ß√£o</h3>
                        
                        <div class="form-group">
                            <label class="form-label" for="adLocation">Localiza√ß√£o *</label>
                            <input type="text" class="form-control" id="adLocation" required placeholder="Cidade, Estado">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Imagens</h3>
                        
                        <div class="image-upload-area" id="imageUploadArea">
                            <div class="upload-placeholder">
                                <div class="upload-icon">üì∑</div>
                                <div class="upload-text">
                                    <strong>Clique para adicionar imagens</strong>
                                    <br>ou arraste e solte aqui
                                </div>
                                <input type="file" id="imageInput" multiple accept="image/*" style="display: none;">
                            </div>
                            <div class="image-preview-grid" id="imagePreviewGrid"></div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>V√≠deo (Opcional)</h3>
                        
                        <div class="video-upload-area" id="videoUploadArea">
                            <div class="upload-placeholder">
                                <div class="upload-icon">üé•</div>
                                <div class="upload-text">
                                    <strong>Clique para adicionar v√≠deo</strong>
                                    <br>ou arraste e solte aqui
                                </div>
                                <div class="upload-info">
                                    <small>Formatos: MP4, MOV (m√°x. 100MB)</small>
                                    <br>
                                    <small>Dura√ß√£o: 5-60 segundos</small>
                                </div>
                                <input type="file" id="videoInput" accept="video/*" style="display: none;">
                            </div>
                            <div class="video-preview-grid" id="videoPreviewGrid"></div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Agendamento</h3>
                        
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="schedulePost">
                            <label class="form-check-label" for="schedulePost">
                                Agendar publica√ß√£o
                            </label>
                        </div>

                        <div class="schedule-options" id="scheduleOptions" style="display: none;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="scheduleDate">Data</label>
                                    <input type="date" class="form-control" id="scheduleDate">
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="scheduleTime">Hor√°rio</label>
                                    <input type="time" class="form-control" id="scheduleTime">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" id="saveAsDraftBtn">
                            üíæ Salvar como Rascunho
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <span class="btn-text">üöÄ Publicar Agora</span>
                            <span class="loading d-none"></span>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Schedule Tab -->
            <div class="tab-pane" id="schedule">
                <div class="schedule-header">
                    <h3>An√∫ncios Agendados</h3>
                    <button class="btn btn-sm btn-primary" id="refreshScheduleBtn">
                        üîÑ Atualizar
                    </button>
                </div>

                <div class="schedule-filters">
                    <select class="form-control" id="scheduleFilter">
                        <option value="all">Todos os agendamentos</option>
                        <option value="pending">Pendentes</option>
                        <option value="completed">Conclu√≠dos</option>
                        <option value="failed">Falharam</option>
                    </select>
                </div>

                <div class="schedule-list" id="scheduleList">
                    <div class="empty-state">
                        <div class="empty-icon">üìÖ</div>
                        <div class="empty-text">
                            <h4>Nenhum agendamento encontrado</h4>
                            <p>Crie um an√∫ncio e agende sua publica√ß√£o</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <span class="status-indicator" id="connectionStatus"></span>
                <span class="status-text" id="connectionText">Verificando conex√£o...</span>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="bulkImportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Importar An√∫ncios em Massa</h3>
                <button class="modal-close" id="closeBulkModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-options">
                    <div class="import-option">
                        <input type="radio" name="importType" value="csv" id="importCSV" checked>
                        <label for="importCSV">Arquivo CSV</label>
                    </div>
                    <div class="import-option">
                        <input type="radio" name="importType" value="json" id="importJSON">
                        <label for="importJSON">Arquivo JSON</label>
                    </div>
                </div>
                
                <div class="file-upload">
                    <input type="file" id="bulkFileInput" accept=".csv,.json">
                    <label for="bulkFileInput" class="btn btn-outline w-100">
                        üìÅ Selecionar Arquivo
                    </label>
                </div>
                
                <div class="import-preview" id="importPreview" style="display: none;">
                    <h4>Pr√©via dos Dados</h4>
                    <div class="preview-content" id="previewContent"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelImportBtn">Cancelar</button>
                <button class="btn btn-primary" id="confirmImportBtn" disabled>
                    üì• Importar An√∫ncios
                </button>
            </div>
        </div>
    </div>

    <script src="../lib/utils.js"></script>
    <script src="../lib/database.js"></script>
    <script src="popup.js"></script>
</body>
</html>

